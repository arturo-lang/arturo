<nav class="breadcrumb is-size-7-mobile is-size-6" aria-label="breadcrumbs">
    <ul>
        <||= if not? all? @[2 = size pagePath "documentation" = first pagePath  "_index" = last pagePath][ ||>
            <li><a href="<||= linkTo {documentation/} ||>" style="margin-left:0">Home</a></li>
        <|| ] ||>
        <||= 
            pathItems: new []
            pathSoFar: new ["documentation"]

            pageRoute: new pagePath 
            if "_index" = last pageRoute -> pageRoute: chop pageRoute
            pageRoute: slice pageRoute 1 (size pageRoute)-1
            loop.with:'pidx pageRoute 'pp [
                'pathSoFar ++ pp
                switch pp=last pageRoute [
                    lastItem: pp 
                    if not? and? [contains? pageRoute "library"]
                                 [and? [0 =< pidx-2]["library"= pageRoute\[pidx-2]]] [
                        lastItem: join.with:" " map split.words lastItem 'x -> capitalize replace x "-" "?"
                    ]
                    'pathItems ++ ~{<li class="is-active"><a href="#">|replace lastItem "-" "?"|</a></li>}
                ] [
                    'pathItems ++ ~{<li><a href="|linkTo join.path pathSoFar|">|capitalize pp|</a></li>}
                ] 
            ]
            join pathItems
        ||>
        <||= if key? W 'source [ ~{
            <li class="source-link"><a target="_blank" href="|W\source|"><!--ph-code-bold--><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M71.68,97.22,34.74,128l36.94,30.78a12,12,0,1,1-15.36,18.44l-48-40a12,12,0,0,1,0-18.44l48-40A12,12,0,0,1,71.68,97.22Zm176,21.56-48-40a12,12,0,1,0-15.36,18.44L221.26,128l-36.94,30.78a12,12,0,1,0,15.36,18.44l48-40a12,12,0,0,0,0-18.44ZM164.1,28.72a12,12,0,0,0-15.38,7.18l-64,176a12,12,0,0,0,7.18,15.37A11.79,11.79,0,0,0,96,228a12,12,0,0,0,11.28-7.9l64-176A12,12,0,0,0,164.1,28.72Z"></path></svg></i>&nbsp;&nbsp;Source</a></li>
        }] ||>
    </ul>
</nav>